# 2026-01-09 ì‘ì—… ì™„ë£Œ ë‚´ì—­

## ğŸ“‹ ì™„ë£Œëœ ì‘ì—…

### 1. ë²„ê·¸ ìˆ˜ì • âœ…

#### 1.1 ëª©í‘œ ì§„í–‰ë¥  ê³„ì‚° ë²„ê·¸
**íŒŒì¼**: `app/api/goals/route.ts:34-36`
- ì‚­ì œëœ ì‘ì—…(deletedAt != null)ì„ ì§„í–‰ë¥  ê³„ì‚°ì—ì„œ ì œì™¸
- ë¬¸ì œ: ì‘ì—… 5ê°œ ì¤‘ 1ê°œ ì‚­ì œ â†’ ìƒˆ ì‘ì—… 1ê°œë§Œ ì™„ë£Œí•´ë„ 100% ë‹¬ì„±
- í•´ê²°: Task includeì— `where: { deletedAt: null }` ì¶”ê°€

#### 1.2 í¬ì»¤ìŠ¤ íƒ€ì´ë¨¸ actualTime ë²„ê·¸
**íŒŒì¼**: `components/dashboard/FocusTimer.tsx`
- **Line 269**: 24ì‹œê°„ ì´ˆê³¼ ì‹œ 0 ì„¤ì • â†’ maxSecondsë¡œ ì œí•œ
- **Line 238**: paused ì‹œ actualTime ì¤‘ê°„ ì €ì¥
- **Line 85, 88**: ì„¸ì…˜ ë³µêµ¬ ì‹œ elapsedRef ì´ˆê¸°í™” ê°œì„ 
- ë¬¸ì œ: ì¤‘ë‹¨ëœ ì„¸ì…˜ì´ "0ë¶„ / 25ë¶„"ìœ¼ë¡œ í‘œì‹œ
- í•´ê²°: actualTimeì„ ì •í™•íˆ ê³„ì‚°í•˜ì—¬ "8ë¶„ / 25ë¶„" í‘œì‹œ

#### 1.3 í¬ì»¤ìŠ¤ íƒ€ì´ë¨¸ ì•Œë¦¼ ê¸°ëŠ¥
**íŒŒì¼**: `components/dashboard/FocusTimer.tsx`
- **Line 310-321**: ë””ë²„ê¹… ë¡œê·¸ ì¶”ê°€
- **Line 122-131**: 5ë¶„ ì „ ì•Œë¦¼ ì—ëŸ¬ í•¸ë“¤ë§
- ì„¤ì •, ê¶Œí•œ ìƒíƒœ ì½˜ì†” ì¶œë ¥ìœ¼ë¡œ ë””ë²„ê¹… ìš©ì´

#### 1.4 ì‘ì—… ì¶”ê°€/ì‚­ì œ ì‹¤ì‹œê°„ ë°˜ì˜
**íŒŒì¼**: `app/dashboard/page.tsx`
- **Line 11**: useQueryClient import
- **Line 191-192, 169-170**: invalidateQueries í˜¸ì¶œ
- ë¬¸ì œ: ì‘ì—… ì¶”ê°€/ì‚­ì œ í›„ ìƒˆë¡œê³ ì¹¨ í•„ìš”
- í•´ê²°: React Query ìºì‹œ ë¬´íš¨í™”ë¡œ ì¦‰ì‹œ ë°˜ì˜

---

### 2. ì•„ì¹´ì´ë¸Œ ì‹œìŠ¤í…œ êµ¬í˜„ âœ…

#### 2.1 API ì—”ë“œí¬ì¸íŠ¸
**`app/api/tasks/archived/route.ts`** âœ¨ ì‹ ê·œ
- GET: ì•„ì¹´ì´ë¸Œ ëª©ë¡ ì¡°íšŒ (type=all|success|failed)
- í†µê³„ ìë™ ê³„ì‚° (ì „ì²´/ì„±ê³µ/ì‹¤íŒ¨/ì„±ê³µë¥ )

**`app/api/tasks/[id]/unarchive/route.ts`** âœ¨ ì‹ ê·œ
- PATCH: ì•„ì¹´ì´ë¸Œ ë³µêµ¬ (â†’ completed ìƒíƒœ)

#### 2.2 ìë™ ì•„ì¹´ì´ë¸Œ Cron Job
**`app/api/cron/archive-tasks/route.ts`** âœ¨ ì‹ ê·œ
- ë§¤ì¼ ìì • UTC (0 0 * * *)
- 24ì‹œê°„ ì§€ë‚œ completed ì‘ì—… ìë™ ì•„ì¹´ì´ë¸Œ
- ê¸°í•œ ë¹„êµ:
  - `completedAt <= scheduledDate` â†’ `archived_success`
  - `completedAt > scheduledDate` â†’ `archived_failed`
  - scheduledDate ì—†ìŒ â†’ `archived_success`

**`vercel.json`** ğŸ“ ìˆ˜ì •
- Cron ì„¤ì • ì¶”ê°€

**`.env.example`** ğŸ“ ìˆ˜ì •
- `CRON_SECRET` ì¶”ê°€ (Vercel Cron ì¸ì¦)

#### 2.3 UI êµ¬í˜„
**`components/archive/ArchiveList.tsx`** âœ¨ ì‹ ê·œ
- í†µê³„ ì¹´ë“œ (ì „ì²´/ì„±ê³µ/ì‹¤íŒ¨/ì„±ê³µë¥ )
- í•„í„° íƒ­ (ì „ì²´/ì„±ê³µ/ì‹¤íŒ¨)
- ì‘ì—… ëª©ë¡ + ë³µêµ¬ ë²„íŠ¼

**`app/settings/page.tsx`** ğŸ“ ìˆ˜ì •
- "ì•„ì¹´ì´ë¸Œ" íƒ­ ì¶”ê°€

---

### 3. í• ì¼ ì‹œì‘ ë²„íŠ¼ êµ¬í˜„ âœ…

#### 3.1 TaskList ë²„íŠ¼ ì¶”ê°€
**`components/dashboard/TaskList.tsx`** ğŸ“ ìˆ˜ì •
- Play ë²„íŠ¼ + ë“œë¡­ë‹¤ìš´ ë©”ë‰´
- ë¹ ë¥¸ ì‹œì‘: 10/20/30/40/50/60ë¶„
- "ìì„¸íˆ" ì˜µì…˜: í¬ì»¤ìŠ¤ íƒ€ì´ë¨¸ë¡œ ìŠ¤í¬ë¡¤ + ì‘ì—…ë§Œ ì„ íƒ
- hover ì‹œ í‘œì‹œ, ì™„ë£Œëœ ì‘ì—…ì€ ìˆ¨ê¹€

#### 3.2 ëŒ€ì‹œë³´ë“œ ì—°ë™
**`app/dashboard/page.tsx`** ğŸ“ ìˆ˜ì •
- `handleStartFocus` í•¨ìˆ˜ ì¶”ê°€
- `focusTaskTrigger` ìƒíƒœ ê´€ë¦¬
- `focusTimerRef`ë¡œ ìŠ¤í¬ë¡¤ ì—°ë™

#### 3.3 í¬ì»¤ìŠ¤ íƒ€ì´ë¨¸ ìë™ ì„¤ì •
**`components/dashboard/FocusTimer.tsx`** ğŸ“ ìˆ˜ì •
- `taskTrigger` prop ì¶”ê°€
- useEffectë¡œ ìë™ ì„¤ì •
- ì‘ì—… ì„ íƒ + ì‹œê°„ ì„¤ì • ìë™í™”

---

### 4. ì§„í–‰ì¤‘ ì¹¸ ìë™ ì „í™˜ âœ…

#### 4.1 íƒ€ì´ë¨¸ ì‹œì‘ ì‹œ
**`components/dashboard/FocusTimer.tsx:248-260`**
- ì‘ì—… ìƒíƒœ â†’ `in_progress`
- API: `PATCH /api/tasks/${taskId}` with `{ status: 'in_progress' }`

#### 4.2 íƒ€ì´ë¨¸ ì™„ë£Œ ì‹œ
**`components/dashboard/FocusTimer.tsx:384-394`**
- ì‘ì—… ìƒíƒœ â†’ `completed`
- API: `PATCH /api/tasks/${taskId}/complete`

#### 4.3 íƒ€ì´ë¨¸ ì¤‘ë‹¨ ì‹œ
**`components/dashboard/FocusTimer.tsx:330-342`**
- ì‘ì—… ìƒíƒœ â†’ `todo` (ì›ë˜ ìƒíƒœë¡œ ë³µê·€)
- API: `PATCH /api/tasks/${taskId}` with `{ status: 'todo' }`

---

## ğŸ“Š ì‘ì—… í†µê³„

- **ìˆ˜ì •ëœ íŒŒì¼**: 7ê°œ
- **ì‹ ê·œ íŒŒì¼**: 4ê°œ
- **ë²„ê·¸ ìˆ˜ì •**: 4ê°œ
- **ì‹ ê·œ ê¸°ëŠ¥**: 3ê°œ
- **ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 6-8ì‹œê°„
- **ì‹¤ì œ ì†Œìš” ì‹œê°„**: ~7ì‹œê°„

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

### ë²„ê·¸ ìˆ˜ì • í…ŒìŠ¤íŠ¸
1. ëª©í‘œ ì§„í–‰ë¥ : ì‘ì—… 5ê°œ ì¶”ê°€ â†’ 2ê°œ ì‚­ì œ â†’ 1ê°œ ì™„ë£Œ = 33% (ì •ìƒ)
2. í¬ì»¤ìŠ¤ íƒ€ì´ë¨¸: 25ë¶„ ì‹œì‘ â†’ 5ë¶„ í›„ ì¤‘ë‹¨ â†’ "5ë¶„ / 25ë¶„" í‘œì‹œ
3. ì•Œë¦¼: F12 ì½˜ì†”ì—ì„œ ë¡œê·¸ í™•ì¸
4. ì‹¤ì‹œê°„ ë°˜ì˜: ì‘ì—… ì¶”ê°€/ì‚­ì œ â†’ ìƒˆë¡œê³ ì¹¨ ì—†ì´ ì¦‰ì‹œ í‘œì‹œ

### ì•„ì¹´ì´ë¸Œ í…ŒìŠ¤íŠ¸
1. ì„¤ì • â†’ ì•„ì¹´ì´ë¸Œ íƒ­
2. ìˆ˜ë™ ì‹¤í–‰: `curl http://localhost:3000/api/cron/archive-tasks`
3. í†µê³„ ë° ë³µêµ¬ ê¸°ëŠ¥ í™•ì¸

### í• ì¼ ì‹œì‘ ë²„íŠ¼ í…ŒìŠ¤íŠ¸
1. ëŒ€ì‹œë³´ë“œ ì‘ì—…ì— hover
2. "ì‹œì‘" ë²„íŠ¼ â†’ 30ë¶„ ì„ íƒ
3. í¬ì»¤ìŠ¤ íƒ€ì´ë¨¸ì— ìë™ ì„¤ì • í™•ì¸

### ì§„í–‰ì¤‘ ì¹¸ í…ŒìŠ¤íŠ¸
1. ì¹¸ë°˜ ë³´ë“œì—ì„œ "í• ì¼" í™•ì¸
2. í¬ì»¤ìŠ¤ íƒ€ì´ë¨¸ ì‹œì‘ â†’ "ì§„í–‰ì¤‘"ìœ¼ë¡œ ì´ë™
3. ì™„ë£Œ â†’ "ì™„ë£Œ"ë¡œ ì´ë™
4. ì¤‘ë‹¨ â†’ "í• ì¼"ë¡œ ë³µê·€

---

### 5. ë£¨í‹´ ì™„ë£Œ ì²´í¬ ê¸°ëŠ¥ âœ…

#### 5.1 DB ìŠ¤í‚¤ë§ˆ
**`prisma/schema.prisma`** ğŸ“ ìˆ˜ì •
- `RoutineCheck` ëª¨ë¸ ì¶”ê°€
- `Routine`/`User` relation ì—°ê²°
- ìœ ë‹ˆí¬ ì œì•½: `routineId + userId + date`

#### 5.2 API ì—”ë“œí¬ì¸íŠ¸
**`app/api/routines/[id]/check/route.ts`** âœ¨ ì‹ ê·œ
- POST: ì˜¤ëŠ˜ ë‚ ì§œë¡œ ì²´í¬ ìƒì„±
- DELETE: ì˜¤ëŠ˜ ë‚ ì§œ ì²´í¬ ì‚­ì œ

**`app/api/routines/route.ts`** ğŸ“ ìˆ˜ì •
- GET ì‘ë‹µì— `isCheckedToday` í¬í•¨

#### 5.3 UI ì²´í¬ë°•ìŠ¤
**`components/dashboard/TodayRoutines.tsx`** ğŸ“ ìˆ˜ì •
- ì²´í¬ë°•ìŠ¤ UI ì¶”ê°€
- ì²´í¬/ì–¸ì²´í¬ ì¦‰ì‹œ ë°˜ì˜
- ì²´í¬ëœ ë£¨í‹´ íë¦¼ ì²˜ë¦¬

---

### ë£¨í‹´ ì²´í¬ í…ŒìŠ¤íŠ¸
1. ì˜¤ëŠ˜ì˜ ë£¨í‹´ ì¹´ë“œ ì²´í¬ â†’ ì™„ë£Œ ì²˜ë¦¬ í‘œì‹œ
2. ìƒˆë¡œê³ ì¹¨ í›„ ì²´í¬ ìƒíƒœ ìœ ì§€ í™•ì¸
3. ì²´í¬ í•´ì œ â†’ ì™„ë£Œ ê¸°ë¡ ì‚­ì œ í™•ì¸

---

### 6. ë£¨í‹´ ì„±ê³µ/ì‹¤íŒ¨ ë¦¬í¬íŠ¸ ê¸°ë¡ âœ…

#### 6.1 DB ìŠ¤í‚¤ë§ˆ
**`prisma/schema.prisma`** ğŸ“ ìˆ˜ì •
- `RoutineResult` ëª¨ë¸ ì¶”ê°€
- `Routine`/`User` relation ì—°ê²°

#### 6.2 Cron Job
**`app/api/cron/routine-results/route.ts`** âœ¨ ì‹ ê·œ
- ìì •(Asia/Seoul) ê¸°ì¤€ ì „ì¼ ë£¨í‹´ ê²°ê³¼ ì§‘ê³„
- ì²´í¬ëœ ë£¨í‹´ â†’ success
- ì²´í¬ ì•ˆ ëœ ë£¨í‹´ â†’ failed

**`vercel.json`** ğŸ“ ìˆ˜ì •
- `/api/cron/routine-results` ìŠ¤ì¼€ì¤„ ì¶”ê°€ (00:00 KST)

#### 6.3 ë¦¬í¬íŠ¸ í™”ë©´
**`app/api/reports/route.ts`** ğŸ“ ìˆ˜ì •
- ë£¨í‹´ ì„±ê³µ/ì‹¤íŒ¨ ì§‘ê³„ ì¶”ê°€

**`components/reports/RoutineResults.tsx`** âœ¨ ì‹ ê·œ
- ì„±ê³µ/ì‹¤íŒ¨/ì„±ê³µë¥  ì¹´ë“œ í‘œì‹œ

**`app/reports/page.tsx`** ğŸ“ ìˆ˜ì •
- ë¦¬í¬íŠ¸ í™”ë©´ì— ë£¨í‹´ ê²°ê³¼ ì„¹ì…˜ ì¶”ê°€

---

### 7. ì‘ì—… ì•„ì¹´ì´ë¸Œ ê·œì¹™ ë³€ê²½ + ìˆ˜ë™ ì•„ì¹´ì´ë¸Œ âœ…

#### 7.1 ìë™ ì•„ì¹´ì´ë¸Œ ê¸°ì¤€ ë³€ê²½
**`app/api/cron/archive-tasks/route.ts`** ğŸ“ ìˆ˜ì •
- ì™„ë£Œ í›„ 24ì‹œê°„ â†’ 12ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ë³€ê²½

**`vercel.json`** ğŸ“ ìˆ˜ì •
- ì•„ì¹´ì´ë¸Œ cron ì£¼ê¸°: 1ì‹œê°„ë§ˆë‹¤ ì‹¤í–‰

#### 7.2 ìˆ˜ë™ ì•„ì¹´ì´ë¸Œ API
**`app/api/tasks/[id]/archive/route.ts`** âœ¨ ì‹ ê·œ
- ì™„ë£Œëœ ì‘ì—…ì„ ì„±ê³µ/ì‹¤íŒ¨ ì•„ì¹´ì´ë¸Œë¡œ ì§ì ‘ ì´ë™

#### 7.3 ì¹¸ë°˜ UI
**`components/kanban/KanbanCard.tsx`** ğŸ“ ìˆ˜ì •
- ì™„ë£Œëœ ì¹´ë“œì— â€œì„±ê³µ/ì‹¤íŒ¨ ì•„ì¹´ì´ë¸Œâ€ ë²„íŠ¼ ì¶”ê°€
- ì™„ë£Œ í›„ ê²½ê³¼ ì‹œê°„ í‘œì‹œ

**`components/kanban/KanbanBoard.tsx`** ğŸ“ ìˆ˜ì •
**`components/kanban/KanbanColumn.tsx`** ğŸ“ ìˆ˜ì •
**`app/kanban/page.tsx`** ğŸ“ ìˆ˜ì •
- ìˆ˜ë™ ì•„ì¹´ì´ë¸Œ ì²˜ë¦¬ í•¸ë“¤ëŸ¬ ì—°ê²°

---

### ë£¨í‹´ ê²°ê³¼ í…ŒìŠ¤íŠ¸
1. ë£¨í‹´ ì²´í¬ ìˆ˜í–‰
2. ìì • ì´í›„ cron ì‹¤í–‰ â†’ success ê¸°ë¡ ìƒì„± í™•ì¸
3. ì²´í¬í•˜ì§€ ì•Šì€ ë£¨í‹´ â†’ failed ê¸°ë¡ ìƒì„± í™•ì¸
4. ë¦¬í¬íŠ¸ í˜ì´ì§€ì—ì„œ ì„±ê³µ/ì‹¤íŒ¨ ì§‘ê³„ í™•ì¸

### ì•„ì¹´ì´ë¸Œ í…ŒìŠ¤íŠ¸ (ì—…ë°ì´íŠ¸)
1. ì™„ë£Œëœ ì‘ì—…ì„ 12ì‹œê°„ ëŒ€ê¸° â†’ ìë™ ì•„ì¹´ì´ë¸Œ í™•ì¸
2. ì¹¸ë°˜ ì™„ë£Œ ì¹´ë“œì—ì„œ ì„±ê³µ/ì‹¤íŒ¨ ì•„ì¹´ì´ë¸Œ ë²„íŠ¼ ì‚¬ìš©
3. ì„¤ì • > ì•„ì¹´ì´ë¸Œ íƒ­ì—ì„œ ì´ë™ëœ ì‘ì—… í™•ì¸

---

### 8. Vercel Cron ì œí•œ ëŒ€ì‘ (Hobby í”Œëœ) âœ…

#### 8.1 ë¬¸ì œ
- Hobby í”Œëœì€ í•˜ë£¨ 1íšŒ ì´ˆê³¼ Cronì„ í—ˆìš©í•˜ì§€ ì•ŠìŒ
- `0 * * * *` ê°™ì€ ë§¤ì‹œ Cron ë•Œë¬¸ì— Vercel í”„ë¡œì íŠ¸ Import/ì¬ì—°ê²°ì´ ë§‰í˜

#### 8.2 ì¡°ì¹˜
**`vercel.json`** ğŸ“ ìˆ˜ì •
- ë§¤ì‹œ Cron ë° ë£¨í‹´ ê²°ê³¼ Cron ì œê±°
- ì•„ì¹´ì´ë¸Œ Cronì€ í•˜ë£¨ 1íšŒ(`0 0 * * *`)ë¡œ ìœ ì§€

#### 8.3 í›„ì† ì‘ì—… (TODO)
- ë£¨í‹´ ê²°ê³¼ ì§‘ê³„ì™€ 12ì‹œê°„ ì•„ì¹´ì´ë¸ŒëŠ” ì™¸ë¶€ ìŠ¤ì¼€ì¤„ëŸ¬(GitHub Actions ë“±)ë¡œ ì´ì „í•˜ê±°ë‚˜ Pro í”Œëœ ì—…ê·¸ë ˆì´ë“œ ì‹œ ë³µêµ¬

---

## ğŸ“ ì¶”ê°€ ë³€ê²½ ë‚´ì—­

### ì‹ ê·œ ìƒì„±
1. `app/api/routines/[id]/check/route.ts`
2. `app/api/cron/routine-results/route.ts`
3. `app/api/tasks/[id]/archive/route.ts`
4. `components/reports/RoutineResults.tsx`

### ìˆ˜ì •
1. `app/api/routines/route.ts`
2. `components/dashboard/TodayRoutines.tsx`
3. `prisma/schema.prisma`
4. `app/api/reports/route.ts`
5. `app/reports/page.tsx`
6. `components/kanban/KanbanBoard.tsx`
7. `components/kanban/KanbanCard.tsx`
8. `components/kanban/KanbanColumn.tsx`
9. `app/kanban/page.tsx`
10. `vercel.json`

---

## ğŸ“ íŒŒì¼ ë³€ê²½ ë‚´ì—­

### ì‹ ê·œ ìƒì„±
1. `app/api/tasks/archived/route.ts`
2. `app/api/tasks/[id]/unarchive/route.ts`
3. `app/api/cron/archive-tasks/route.ts`
4. `components/archive/ArchiveList.tsx`

### ìˆ˜ì •
1. `app/api/goals/route.ts`
2. `components/dashboard/FocusTimer.tsx`
3. `app/dashboard/page.tsx`
4. `components/dashboard/TaskList.tsx`
5. `app/settings/page.tsx`
6. `vercel.json`
7. `.env.example`

---

**ì‘ì—… ì¼ì**: 2026-01-09
**ë‹´ë‹¹**: Claude Code + Partner
